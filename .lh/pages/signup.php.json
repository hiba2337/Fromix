{
    "sourceFile": "pages/signup.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 28,
            "patches": [
                {
                    "date": 1765025237117,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1765025245605,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,3 @@\n+<?php\n+include\n+ ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765025254599,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,3 @@\n <?php\n-include\n- ?>\n-<?php\n- \n\\ No newline at end of file\n+include \"config\"\n+ ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765025259932,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,3 +1,3 @@\n <?php\n-include \"config\"\n+include \"config.php\",\n  ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765147396438,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,3 +1,105 @@\n-<?php\n-include \"config.php\",\n- ?>\n\\ No newline at end of file\n+<?php\r\n+session_start();\r\n+include \"config.php\"; // الاتصال بقاعدة البيانات\r\n+\r\n+$error_msg = \"\";\r\n+\r\n+// معالجة الفورم\r\n+if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n+\r\n+    $name     = $_POST['name'];\r\n+    $email    = $_POST['email'];\r\n+    $pass     = $_POST['pass'];\r\n+    $phone    = $_POST['phone'] ?? null;\r\n+    $role_id  = $_POST['role_id'];\r\n+\r\n+    // التحقق من البريد المكرر\r\n+    $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n+    $check_result = mysqli_query($conn, $check_sql);\r\n+\r\n+    if (mysqli_num_rows($check_result) > 0) {\r\n+        $error_msg = \"❌ Email already exists!\";\r\n+    } else {\r\n+        // تشفير كلمة المرور\r\n+        $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n+\r\n+        // إدخال البيانات\r\n+        $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n+                       VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n+\r\n+        if (mysqli_query($conn, $insert_sql)) {\r\n+            // تخزين بيانات المستخدم في session\r\n+            $_SESSION['user_name'] = $name;\r\n+            $_SESSION['user_email'] = $email;\r\n+            $_SESSION['user_role'] = $role_id;\r\n+\r\n+            // تحويل المستخدم للـ dashboard\r\n+            header(\"Location: dashboard.php\");\r\n+            exit();\r\n+        } else {\r\n+            $error_msg = \"Error: \" . mysqli_error($conn);\r\n+        }\r\n+    }\r\n+}\r\n+\r\n+mysqli_close($conn);\r\n+?>\r\n+\r\n+<!DOCTYPE html>\r\n+<html lang=\"fr\">\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n+    <title>Formix / Sign-up</title>\r\n+    <script src=\"https://kit.fontawesome.com/f14d152ebc.js\" crossorigin=\"anonymous\"></script>\r\n+    <link rel=\"stylesheet\" href=\"../assets/css/normilze.css\">\r\n+    <link rel=\"stylesheet\" href=\"../assets/css/pages/sign-up.css\">\r\n+</head>\r\n+<body>\r\n+<div class=\"container\">\r\n+    <div class=\"form\">\r\n+        <div class=\"text\">\r\n+            <h2>Create Account</h2>\r\n+            <p>Fields marked with (*) are required.</p>\r\n+        </div>\r\n+        <form action=\"\" method=\"post\">\r\n+            <label for=\"name\">Full Name</label>\r\n+            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n+\r\n+            <label for=\"email\">Email</label>\r\n+            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" required>\r\n+\r\n+            <label for=\"pass\">Password</label>\r\n+            <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n+\r\n+            <label for=\"phone\">Your Phone</label>\r\n+            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n+\r\n+            <label>Role</label>\r\n+            <div class=\"role-options\">\r\n+                <div>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n+                    <label for=\"student\">Student</label>\r\n+                </div>\r\n+                <div>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n+                    <label for=\"trainer\">Trainer</label>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <!-- عرض رسالة الخطأ -->\r\n+            <?php if(!empty($error_msg)): ?>\r\n+                <p style=\"color:red; font-weight:bold; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n+            <?php endif; ?>\r\n+\r\n+            <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n+        </form>\r\n+        <div class=\"sing-in\">\r\n+            <p>Already have an account?</p>\r\n+            <a href=\"login.html\">Sign-in</a>\r\n+        </div>\r\n+    </div>\r\n+    <div class=\"img\"></div>\r\n+</div>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1765147424197,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,41 +1,40 @@\n <?php\r\n session_start();\r\n-include \"config.php\"; // الاتصال بقاعدة البيانات\r\n+include \"config.php\"; \r\n \r\n $error_msg = \"\";\r\n \r\n-// معالجة الفورم\r\n+\r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n \r\n     $name     = $_POST['name'];\r\n     $email    = $_POST['email'];\r\n     $pass     = $_POST['pass'];\r\n     $phone    = $_POST['phone'] ?? null;\r\n     $role_id  = $_POST['role_id'];\r\n \r\n-    // التحقق من البريد المكرر\r\n+ \r\n     $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n     $check_result = mysqli_query($conn, $check_sql);\r\n \r\n     if (mysqli_num_rows($check_result) > 0) {\r\n-        $error_msg = \"❌ Email already exists!\";\r\n+        $error_msg = \" Email already exists!\";\r\n     } else {\r\n-        // تشفير كلمة المرور\r\n+    \r\n         $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n \r\n-        // إدخال البيانات\r\n         $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n                        VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n \r\n         if (mysqli_query($conn, $insert_sql)) {\r\n-            // تخزين بيانات المستخدم في session\r\n+           \r\n             $_SESSION['user_name'] = $name;\r\n             $_SESSION['user_email'] = $email;\r\n             $_SESSION['user_role'] = $role_id;\r\n \r\n-            // تحويل المستخدم للـ dashboard\r\n-            header(\"Location: dashboard.php\");\r\n+        \r\n+            header(\"Location: dashboard.html\");\r\n             exit();\r\n         } else {\r\n             $error_msg = \"Error: \" . mysqli_error($conn);\r\n         }\r\n@@ -86,11 +85,11 @@\n                     <label for=\"trainer\">Trainer</label>\r\n                 </div>\r\n             </div>\r\n \r\n-            <!-- عرض رسالة الخطأ -->\r\n+        \r\n             <?php if(!empty($error_msg)): ?>\r\n-                <p style=\"color:red; font-weight:bold; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n+                <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n             <?php endif; ?>\r\n \r\n             <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n         </form>\r\n"
                },
                {
                    "date": 1765147832374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,104 +1,38 @@\n <?php\r\n-session_start();\r\n-include \"config.php\"; \r\n+include \"config.php\";\r\n \r\n-$error_msg = \"\";\r\n-\r\n-\r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n \r\n     $name     = $_POST['name'];\r\n     $email    = $_POST['email'];\r\n     $pass     = $_POST['pass'];\r\n-    $phone    = $_POST['phone'] ?? null;\r\n+    $phone    = $_POST['phone'];\r\n     $role_id  = $_POST['role_id'];\r\n \r\n- \r\n+    // التحقق من البريد المكرر\r\n     $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n     $check_result = mysqli_query($conn, $check_sql);\r\n \r\n     if (mysqli_num_rows($check_result) > 0) {\r\n-        $error_msg = \" Email already exists!\";\r\n-    } else {\r\n-    \r\n-        $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n+        echo \"Email already exists!\";\r\n+        exit();\r\n+    }\r\n \r\n-        $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n-                       VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n+    // تشفير كلمة المرور\r\n+    $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n \r\n-        if (mysqli_query($conn, $insert_sql)) {\r\n-           \r\n-            $_SESSION['user_name'] = $name;\r\n-            $_SESSION['user_email'] = $email;\r\n-            $_SESSION['user_role'] = $role_id;\r\n+    // إدخال المستخدم\r\n+    $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n+                   VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n \r\n-        \r\n-            header(\"Location: dashboard.html\");\r\n-            exit();\r\n-        } else {\r\n-            $error_msg = \"Error: \" . mysqli_error($conn);\r\n-        }\r\n+    if (mysqli_query($conn, $insert_sql)) {\r\n+        // تحويل المستخدم بعد الإدخال\r\n+        header(\"Location: dashboard.html\");\r\n+        exit();\r\n+    } else {\r\n+        echo \"Error: \" . mysqli_error($conn);\r\n     }\r\n }\r\n \r\n mysqli_close($conn);\r\n ?>\r\n-\r\n-<!DOCTYPE html>\r\n-<html lang=\"fr\">\r\n-<head>\r\n-    <meta charset=\"UTF-8\">\r\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n-    <title>Formix / Sign-up</title>\r\n-    <script src=\"https://kit.fontawesome.com/f14d152ebc.js\" crossorigin=\"anonymous\"></script>\r\n-    <link rel=\"stylesheet\" href=\"../assets/css/normilze.css\">\r\n-    <link rel=\"stylesheet\" href=\"../assets/css/pages/sign-up.css\">\r\n-</head>\r\n-<body>\r\n-<div class=\"container\">\r\n-    <div class=\"form\">\r\n-        <div class=\"text\">\r\n-            <h2>Create Account</h2>\r\n-            <p>Fields marked with (*) are required.</p>\r\n-        </div>\r\n-        <form action=\"\" method=\"post\">\r\n-            <label for=\"name\">Full Name</label>\r\n-            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n-\r\n-            <label for=\"email\">Email</label>\r\n-            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" required>\r\n-\r\n-            <label for=\"pass\">Password</label>\r\n-            <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n-\r\n-            <label for=\"phone\">Your Phone</label>\r\n-            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n-\r\n-            <label>Role</label>\r\n-            <div class=\"role-options\">\r\n-                <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n-                    <label for=\"student\">Student</label>\r\n-                </div>\r\n-                <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n-                    <label for=\"trainer\">Trainer</label>\r\n-                </div>\r\n-            </div>\r\n-\r\n-        \r\n-            <?php if(!empty($error_msg)): ?>\r\n-                <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n-            <?php endif; ?>\r\n-\r\n-            <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n-        </form>\r\n-        <div class=\"sing-in\">\r\n-            <p>Already have an account?</p>\r\n-            <a href=\"login.html\">Sign-in</a>\r\n-        </div>\r\n-    </div>\r\n-    <div class=\"img\"></div>\r\n-</div>\r\n-</body>\r\n-</html>\r\n"
                },
                {
                    "date": 1765147839104,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,17 +17,15 @@\n         echo \"Email already exists!\";\r\n         exit();\r\n     }\r\n \r\n-    // تشفير كلمة المرور\r\n     $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n \r\n-    // إدخال المستخدم\r\n     $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n                    VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n \r\n     if (mysqli_query($conn, $insert_sql)) {\r\n-        // تحويل المستخدم بعد الإدخال\r\n+       \r\n         header(\"Location: dashboard.html\");\r\n         exit();\r\n     } else {\r\n         echo \"Error: \" . mysqli_error($conn);\r\n"
                },
                {
                    "date": 1765147888819,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,36 +1,61 @@\n-<?php\r\n-include \"config.php\";\r\n+Warning: Undefined array key \"role_id\" in C:\\xampp\\htdocs\\Project\\pages\\signup.php on line 10\r\n \r\n-if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n+Fatal error: Uncaught mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`gestion_formations`.`users`, CONSTRAINT `users_ibfk_1` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL) in C:\\xampp\\htdocs\\Project\\pages\\signup.php:26 Stack trace: #0 C:\\xampp\\htdocs\\Project\\pages\\signup.php(26): mysqli_query(Object(mysqli), 'INSERT INTO use...') #1 {main} thrown in C:\\xampp\\htdocs\\Project\\pages\\signup.php on line 26\r\n+<!DOCTYPE html>\r\n+<html lang=\"fr\">\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n+    <title>Formix / Sign-up</title>\r\n+    <script src=\"https://kit.fontawesome.com/f14d152ebc.js\" crossorigin=\"anonymous\"></script>\r\n+    <link rel=\"stylesheet\" href=\"../assets/css/normilze.css\">\r\n+    <link rel=\"stylesheet\" href=\"../assets/css/pages/sign-up.css\">\r\n+</head>\r\n+<body>\r\n+<div class=\"container\">\r\n+    <div class=\"form\">\r\n+        <div class=\"text\">\r\n+            <h2>Create Account</h2>\r\n+            <p>Fields marked with (*) are required.</p>\r\n+        </div>\r\n+        <form action=\"\" method=\"post\">\r\n+            <label for=\"name\">Full Name</label>\r\n+            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n \r\n-    $name     = $_POST['name'];\r\n-    $email    = $_POST['email'];\r\n-    $pass     = $_POST['pass'];\r\n-    $phone    = $_POST['phone'];\r\n-    $role_id  = $_POST['role_id'];\r\n+            <label for=\"email\">Email</label>\r\n+            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" required>\r\n \r\n-    // التحقق من البريد المكرر\r\n-    $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n-    $check_result = mysqli_query($conn, $check_sql);\r\n+            <label for=\"pass\">Password</label>\r\n+            <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n \r\n-    if (mysqli_num_rows($check_result) > 0) {\r\n-        echo \"Email already exists!\";\r\n-        exit();\r\n-    }\r\n+            <label for=\"phone\">Your Phone</label>\r\n+            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n \r\n-    $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n+            <label>Role</label>\r\n+            <div class=\"role-options\">\r\n+                <div>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n+                    <label for=\"student\">Student</label>\r\n+                </div>\r\n+                <div>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n+                    <label for=\"trainer\">Trainer</label>\r\n+                </div>\r\n+            </div>\r\n \r\n-    $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n-                   VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n+        \r\n+            <?php if(!empty($error_msg)): ?>\r\n+                <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n+            <?php endif; ?>\r\n \r\n-    if (mysqli_query($conn, $insert_sql)) {\r\n-       \r\n-        header(\"Location: dashboard.html\");\r\n-        exit();\r\n-    } else {\r\n-        echo \"Error: \" . mysqli_error($conn);\r\n-    }\r\n-}\r\n-\r\n-mysqli_close($conn);\r\n-?>\r\n+            <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n+        </form>\r\n+        <div class=\"sing-in\">\r\n+            <p>Already have an account?</p>\r\n+            <a href=\"login.html\">Sign-in</a>\r\n+        </div>\r\n+    </div>\r\n+    <div class=\"img\"></div>\r\n+</div>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1765147906289,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,43 @@\n-Warning: Undefined array key \"role_id\" in C:\\xampp\\htdocs\\Project\\pages\\signup.php on line 10\r\n+<?php\r\n+include \"config.php\";\r\n \r\n-Fatal error: Uncaught mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`gestion_formations`.`users`, CONSTRAINT `users_ibfk_1` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL) in C:\\xampp\\htdocs\\Project\\pages\\signup.php:26 Stack trace: #0 C:\\xampp\\htdocs\\Project\\pages\\signup.php(26): mysqli_query(Object(mysqli), 'INSERT INTO use...') #1 {main} thrown in C:\\xampp\\htdocs\\Project\\pages\\signup.php on line 26\r\n+if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n+\r\n+    $name     = $_POST['name'];\r\n+    $email    = $_POST['email'];\r\n+    $pass     = $_POST['pass'];\r\n+    $phone    = $_POST['phone'];\r\n+    $role_id  = $_POST['role_id'];\r\n+\r\n+    // التحقق من البريد المكرر\r\n+    $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n+    $check_result = mysqli_query($conn, $check_sql);\r\n+\r\n+    if (mysqli_num_rows($check_result) > 0) {\r\n+        echo \"Email already exists!\";\r\n+        exit();\r\n+    }\r\n+\r\n+    // تشفير كلمة المرور\r\n+    $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n+\r\n+    // إدخال المستخدم\r\n+    $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n+                   VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n+\r\n+    if (mysqli_query($conn, $insert_sql)) {\r\n+        // تحويل المستخدم بعد الإدخال\r\n+        header(\"Location: dashboard.html\");\r\n+        exit();\r\n+    } else {\r\n+        echo \"Error: \" . mysqli_error($conn);\r\n+    }\r\n+}\r\n+\r\n+mysqli_close($conn);\r\n+?>\r\n+\r\n <!DOCTYPE html>\r\n <html lang=\"fr\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n"
                },
                {
                    "date": 1765147928208,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n     $pass     = $_POST['pass'];\r\n     $phone    = $_POST['phone'];\r\n     $role_id  = $_POST['role_id'];\r\n \r\n-    // التحقق من البريد المكرر\r\n+   \r\n     $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n     $check_result = mysqli_query($conn, $check_sql);\r\n \r\n     if (mysqli_num_rows($check_result) > 0) {\r\n"
                },
                {
                    "date": 1765148005750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,17 +17,17 @@\n         echo \"Email already exists!\";\r\n         exit();\r\n     }\r\n \r\n-    // تشفير كلمة المرور\r\n+    \r\n     $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n \r\n-    // إدخال المستخدم\r\n+   \r\n     $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n                    VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n \r\n     if (mysqli_query($conn, $insert_sql)) {\r\n-        // تحويل المستخدم بعد الإدخال\r\n+      \r\n         header(\"Location: dashboard.html\");\r\n         exit();\r\n     } else {\r\n         echo \"Error: \" . mysqli_error($conn);\r\n@@ -53,40 +53,41 @@\n         <div class=\"text\">\r\n             <h2>Create Account</h2>\r\n             <p>Fields marked with (*) are required.</p>\r\n         </div>\r\n-        <form action=\"\" method=\"post\">\r\n-            <label for=\"name\">Full Name</label>\r\n-            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n+       <form action=\"\" method=\"post\">\r\n+    <label for=\"name\">Full Name</label>\r\n+    <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" value=\"<?php echo isset($name) ? htmlspecialchars($name) : ''; ?>\" required>\r\n \r\n-            <label for=\"email\">Email</label>\r\n-            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" required>\r\n+    <label for=\"email\">Email</label>\r\n+    <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" value=\"<?php echo isset($email) ? htmlspecialchars($email) : ''; ?>\" required>\r\n \r\n-            <label for=\"pass\">Password</label>\r\n-            <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n+    <label for=\"pass\">Password</label>\r\n+    <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n \r\n-            <label for=\"phone\">Your Phone</label>\r\n-            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n+    <label for=\"phone\">Your Phone</label>\r\n+    <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\" value=\"<?php echo isset($phone) ? htmlspecialchars($phone) : ''; ?>\">\r\n \r\n-            <label>Role</label>\r\n-            <div class=\"role-options\">\r\n-                <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n-                    <label for=\"student\">Student</label>\r\n-                </div>\r\n-                <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n-                    <label for=\"trainer\">Trainer</label>\r\n-                </div>\r\n-            </div>\r\n+    <label>Role</label>\r\n+    <div class=\"role-options\">\r\n+        <div>\r\n+            <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" <?php if(isset($role_id) && $role_id==1) echo \"checked\"; ?> required>\r\n+            <label for=\"student\">Student</label>\r\n+        </div>\r\n+        <div>\r\n+            <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\" <?php if(isset($role_id) && $role_id==2) echo \"checked\"; ?>>\r\n+            <label for=\"trainer\">Trainer</label>\r\n+        </div>\r\n+    </div>\r\n \r\n-        \r\n-            <?php if(!empty($error_msg)): ?>\r\n-                <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n-            <?php endif; ?>\r\n+    <!-- عرض رسالة الخطأ -->\r\n+    <?php if(!empty($error_msg)): ?>\r\n+        <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n+    <?php endif; ?>\r\n \r\n-            <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n-        </form>\r\n+    <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n+</form>\r\n+\r\n         <div class=\"sing-in\">\r\n             <p>Already have an account?</p>\r\n             <a href=\"login.html\">Sign-in</a>\r\n         </div>\r\n"
                },
                {
                    "date": 1765148013823,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n         <div class=\"text\">\r\n             <h2>Create Account</h2>\r\n             <p>Fields marked with (*) are required.</p>\r\n         </div>\r\n-       <form action=\"\" method=\"post\">\r\n+       <form action=\"sig\" method=\"post\">\r\n     <label for=\"name\">Full Name</label>\r\n     <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" value=\"<?php echo isset($name) ? htmlspecialchars($name) : ''; ?>\" required>\r\n \r\n     <label for=\"email\">Email</label>\r\n"
                },
                {
                    "date": 1765148019738,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n         <div class=\"text\">\r\n             <h2>Create Account</h2>\r\n             <p>Fields marked with (*) are required.</p>\r\n         </div>\r\n-       <form action=\"sig\" method=\"post\">\r\n+       <form action=\"signup.php\" method=\"post\">\r\n     <label for=\"name\">Full Name</label>\r\n     <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" value=\"<?php echo isset($name) ? htmlspecialchars($name) : ''; ?>\" required>\r\n \r\n     <label for=\"email\">Email</label>\r\n"
                },
                {
                    "date": 1765148107899,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,46 +53,45 @@\n         <div class=\"text\">\r\n             <h2>Create Account</h2>\r\n             <p>Fields marked with (*) are required.</p>\r\n         </div>\r\n-       <form action=\"signup.php\" method=\"post\">\r\n-    <label for=\"name\">Full Name</label>\r\n-    <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" value=\"<?php echo isset($name) ? htmlspecialchars($name) : ''; ?>\" required>\r\n+        <form action=\"\" method=\"post\">\r\n+            <label for=\"name\">Full Name</label>\r\n+            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n \r\n-    <label for=\"email\">Email</label>\r\n-    <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" value=\"<?php echo isset($email) ? htmlspecialchars($email) : ''; ?>\" required>\r\n+            <label for=\"email\">Email</label>\r\n+            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" required>\r\n \r\n-    <label for=\"pass\">Password</label>\r\n-    <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n+            <label for=\"pass\">Password</label>\r\n+            <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n \r\n-    <label for=\"phone\">Your Phone</label>\r\n-    <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\" value=\"<?php echo isset($phone) ? htmlspecialchars($phone) : ''; ?>\">\r\n+            <label for=\"phone\">Your Phone</label>\r\n+            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n \r\n-    <label>Role</label>\r\n-    <div class=\"role-options\">\r\n-        <div>\r\n-            <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" <?php if(isset($role_id) && $role_id==1) echo \"checked\"; ?> required>\r\n-            <label for=\"student\">Student</label>\r\n-        </div>\r\n-        <div>\r\n-            <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\" <?php if(isset($role_id) && $role_id==2) echo \"checked\"; ?>>\r\n-            <label for=\"trainer\">Trainer</label>\r\n-        </div>\r\n-    </div>\r\n+            <label>Role</label>\r\n+            <div class=\"role-options\">\r\n+                <div>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n+                    <label for=\"student\">Student</label>\r\n+                </div>\r\n+                <div>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n+                    <label for=\"trainer\">Trainer</label>\r\n+                </div>\r\n+            </div>\r\n \r\n-    <!-- عرض رسالة الخطأ -->\r\n-    <?php if(!empty($error_msg)): ?>\r\n-        <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n-    <?php endif; ?>\r\n+        \r\n+            <?php if(!empty($error_msg)): ?>\r\n+                <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n+            <?php endif; ?>\r\n \r\n-    <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n-</form>\r\n-\r\n+            <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n+        </form>\r\n         <div class=\"sing-in\">\r\n             <p>Already have an account?</p>\r\n             <a href=\"login.html\">Sign-in</a>\r\n         </div>\r\n     </div>\r\n     <div class=\"img\"></div>\r\n </div>\r\n </body>\r\n-</html>\r\n+</html>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765148114352,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n         <div class=\"text\">\r\n             <h2>Create Account</h2>\r\n             <p>Fields marked with (*) are required.</p>\r\n         </div>\r\n-        <form action=\"\" method=\"post\">\r\n+        <form action=\"si\" method=\"post\">\r\n             <label for=\"name\">Full Name</label>\r\n             <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n \r\n             <label for=\"email\">Email</label>\r\n"
                },
                {
                    "date": 1765148120774,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n         <div class=\"text\">\r\n             <h2>Create Account</h2>\r\n             <p>Fields marked with (*) are required.</p>\r\n         </div>\r\n-        <form action=\"si\" method=\"post\">\r\n+        <form action=\"signup.php\" method=\"post\">\r\n             <label for=\"name\">Full Name</label>\r\n             <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n \r\n             <label for=\"email\">Email</label>\r\n"
                },
                {
                    "date": 1765148165608,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,97 +1,4 @@\n-<?php\r\n-include \"config.php\";\r\n \r\n-if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n+Warning: Undefined array key \"role_id\" in C:\\xampp\\htdocs\\Project\\pages\\signup.php on line 10\r\n \r\n-    $name     = $_POST['name'];\r\n-    $email    = $_POST['email'];\r\n-    $pass     = $_POST['pass'];\r\n-    $phone    = $_POST['phone'];\r\n-    $role_id  = $_POST['role_id'];\r\n-\r\n-   \r\n-    $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n-    $check_result = mysqli_query($conn, $check_sql);\r\n-\r\n-    if (mysqli_num_rows($check_result) > 0) {\r\n-        echo \"Email already exists!\";\r\n-        exit();\r\n-    }\r\n-\r\n-    \r\n-    $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n-\r\n-   \r\n-    $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n-                   VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n-\r\n-    if (mysqli_query($conn, $insert_sql)) {\r\n-      \r\n-        header(\"Location: dashboard.html\");\r\n-        exit();\r\n-    } else {\r\n-        echo \"Error: \" . mysqli_error($conn);\r\n-    }\r\n-}\r\n-\r\n-mysqli_close($conn);\r\n-?>\r\n-\r\n-<!DOCTYPE html>\r\n-<html lang=\"fr\">\r\n-<head>\r\n-    <meta charset=\"UTF-8\">\r\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n-    <title>Formix / Sign-up</title>\r\n-    <script src=\"https://kit.fontawesome.com/f14d152ebc.js\" crossorigin=\"anonymous\"></script>\r\n-    <link rel=\"stylesheet\" href=\"../assets/css/normilze.css\">\r\n-    <link rel=\"stylesheet\" href=\"../assets/css/pages/sign-up.css\">\r\n-</head>\r\n-<body>\r\n-<div class=\"container\">\r\n-    <div class=\"form\">\r\n-        <div class=\"text\">\r\n-            <h2>Create Account</h2>\r\n-            <p>Fields marked with (*) are required.</p>\r\n-        </div>\r\n-        <form action=\"signup.php\" method=\"post\">\r\n-            <label for=\"name\">Full Name</label>\r\n-            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n-\r\n-            <label for=\"email\">Email</label>\r\n-            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" required>\r\n-\r\n-            <label for=\"pass\">Password</label>\r\n-            <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n-\r\n-            <label for=\"phone\">Your Phone</label>\r\n-            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n-\r\n-            <label>Role</label>\r\n-            <div class=\"role-options\">\r\n-                <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n-                    <label for=\"student\">Student</label>\r\n-                </div>\r\n-                <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n-                    <label for=\"trainer\">Trainer</label>\r\n-                </div>\r\n-            </div>\r\n-\r\n-        \r\n-            <?php if(!empty($error_msg)): ?>\r\n-                <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n-            <?php endif; ?>\r\n-\r\n-            <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n-        </form>\r\n-        <div class=\"sing-in\">\r\n-            <p>Already have an account?</p>\r\n-            <a href=\"login.html\">Sign-in</a>\r\n-        </div>\r\n-    </div>\r\n-    <div class=\"img\"></div>\r\n-</div>\r\n-</body>\r\n\\ No newline at end of file\n-</html>\n+Fatal error: Uncaught mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`gestion_formations`.`users`, CONSTRAINT `users_ibfk_1` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL) in C:\\xampp\\htdocs\\Project\\pages\\signup.php:28 Stack trace: #0 C:\\xampp\\htdocs\\Project\\pages\\signup.php(28): mysqli_query(Object(mysqli), 'INSERT INTO use...') #1 {main} thrown in C:\\xampp\\htdocs\\Project\\pages\\signup.php on line 28\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765148426846,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,109 @@\n+<?php\r\n+session_start();\r\n+include \"config.php\";\r\n \r\n\\ No newline at end of file\n-Warning: Undefined array key \"role_id\" in C:\\xampp\\htdocs\\Project\\pages\\signup.php on line 10\r\n+$error_msg = \"\";\r\n \r\n-Fatal error: Uncaught mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`gestion_formations`.`users`, CONSTRAINT `users_ibfk_1` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL) in C:\\xampp\\htdocs\\Project\\pages\\signup.php:28 Stack trace: #0 C:\\xampp\\htdocs\\Project\\pages\\signup.php(28): mysqli_query(Object(mysqli), 'INSERT INTO use...') #1 {main} thrown in C:\\xampp\\htdocs\\Project\\pages\\signup.php on line 28\n+// معالجة الفورم عند الضغط على Sign-up\r\n+if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n+\r\n+    $name     = trim($_POST['name']);\r\n+    $email    = trim($_POST['email']);\r\n+    $pass     = trim($_POST['pass']);\r\n+    $phone    = trim($_POST['phone']);\r\n+    $role_id  = isset($_POST['role_id']) ? $_POST['role_id'] : null;\r\n+\r\n+    // التحقق من الحقول المطلوبة\r\n+    if (empty($name) || empty($email) || empty($pass) || $role_id === null) {\r\n+        $error_msg = \"Please fill in all required fields and select a role!\";\r\n+    } else {\r\n+        // التحقق من البريد المكرر\r\n+        $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n+        $check_result = mysqli_query($conn, $check_sql);\r\n+\r\n+        if (mysqli_num_rows($check_result) > 0) {\r\n+            $error_msg = \"Email already exists!\";\r\n+        } else {\r\n+            // تشفير كلمة المرور\r\n+            $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n+\r\n+            // إدخال البيانات\r\n+            $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n+                           VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n+\r\n+            if (mysqli_query($conn, $insert_sql)) {\r\n+                // إنشاء جلسة للمستخدم\r\n+                $_SESSION['user_name']  = $name;\r\n+                $_SESSION['user_email'] = $email;\r\n+                $_SESSION['user_role']  = $role_id;\r\n+\r\n+                // إعادة التوجيه إلى Dashboard\r\n+                header(\"Location: dashboard.php\");\r\n+                exit();\r\n+            } else {\r\n+                $error_msg = \"Database Error: \" . mysqli_error($conn);\r\n+            }\r\n+        }\r\n+    }\r\n+}\r\n+\r\n+mysqli_close($conn);\r\n+?>\r\n+\r\n+<!DOCTYPE html>\r\n+<html lang=\"fr\">\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n+    <title>Formix / Sign-up</title>\r\n+    <script src=\"https://kit.fontawesome.com/f14d152ebc.js\" crossorigin=\"anonymous\"></script>\r\n+    <link rel=\"stylesheet\" href=\"../assets/css/normilze.css\">\r\n+    <link rel=\"stylesheet\" href=\"../assets/css/pages/sign-up.css\">\r\n+</head>\r\n+<body>\r\n+<div class=\"container\">\r\n+    <div class=\"form\">\r\n+        <div class=\"text\">\r\n+            <h2>Create Account</h2>\r\n+            <p>Fields marked with (*) are required.</p>\r\n+        </div>\r\n+        <form action=\"\" method=\"post\">\r\n+            <label for=\"name\">Full Name</label>\r\n+            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" value=\"<?php echo isset($name) ? $name : ''; ?>\" required>\r\n+\r\n+            <label for=\"email\">Email</label>\r\n+            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" value=\"<?php echo isset($email) ? $email : ''; ?>\" required>\r\n+\r\n+            <label for=\"pass\">Password</label>\r\n+            <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n+\r\n+            <label for=\"phone\">Your Phone</label>\r\n+            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\" value=\"<?php echo isset($phone) ? $phone : ''; ?>\">\r\n+\r\n+            <label>Role</label>\r\n+            <div class=\"role-options\">\r\n+                <div>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" <?php echo (isset($role_id) && $role_id == 1) ? 'checked' : ''; ?> required>\r\n+                    <label for=\"student\">Student</label>\r\n+                </div>\r\n+                <div>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\" <?php echo (isset($role_id) && $role_id == 2) ? 'checked' : ''; ?>>\r\n+                    <label for=\"trainer\">Trainer</label>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <?php if(!empty($error_msg)): ?>\r\n+                <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n+            <?php endif; ?>\r\n+\r\n+            <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n+        </form>\r\n+        <div class=\"sing-in\">\r\n+            <p>Already have an account?</p>\r\n+            <a href=\"login.html\">Sign-in</a>\r\n+        </div>\r\n+    </div>\r\n+    <div class=\"img\"></div>\r\n+</div>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1765148459246,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,50 +1,37 @@\n <?php\r\n-session_start();\r\n include \"config.php\";\r\n \r\n-$error_msg = \"\";\r\n-\r\n-// معالجة الفورم عند الضغط على Sign-up\r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n \r\n-    $name     = trim($_POST['name']);\r\n-    $email    = trim($_POST['email']);\r\n-    $pass     = trim($_POST['pass']);\r\n-    $phone    = trim($_POST['phone']);\r\n-    $role_id  = isset($_POST['role_id']) ? $_POST['role_id'] : null;\r\n+    $name     = $_POST['name'];\r\n+    $email    = $_POST['email'];\r\n+    $pass     = $_POST['pass'];\r\n+    $phone    = $_POST['phone'];\r\n+    $role_id  = $_POST['role_id'];\r\n \r\n-    // التحقق من الحقول المطلوبة\r\n-    if (empty($name) || empty($email) || empty($pass) || $role_id === null) {\r\n-        $error_msg = \"Please fill in all required fields and select a role!\";\r\n-    } else {\r\n-        // التحقق من البريد المكرر\r\n-        $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n-        $check_result = mysqli_query($conn, $check_sql);\r\n+   \r\n+    $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n+    $check_result = mysqli_query($conn, $check_sql);\r\n \r\n-        if (mysqli_num_rows($check_result) > 0) {\r\n-            $error_msg = \"Email already exists!\";\r\n-        } else {\r\n-            // تشفير كلمة المرور\r\n-            $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n+    if (mysqli_num_rows($check_result) > 0) {\r\n+        echo \"Email already exists!\";\r\n+        exit();\r\n+    }\r\n \r\n-            // إدخال البيانات\r\n-            $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n-                           VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n+    \r\n+    $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n \r\n-            if (mysqli_query($conn, $insert_sql)) {\r\n-                // إنشاء جلسة للمستخدم\r\n-                $_SESSION['user_name']  = $name;\r\n-                $_SESSION['user_email'] = $email;\r\n-                $_SESSION['user_role']  = $role_id;\r\n+   \r\n+    $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n+                   VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n \r\n-                // إعادة التوجيه إلى Dashboard\r\n-                header(\"Location: dashboard.php\");\r\n-                exit();\r\n-            } else {\r\n-                $error_msg = \"Database Error: \" . mysqli_error($conn);\r\n-            }\r\n-        }\r\n+    if (mysqli_query($conn, $insert_sql)) {\r\n+      \r\n+        header(\"Location: dashboard.html\");\r\n+        exit();\r\n+    } else {\r\n+        echo \"Error: \" . mysqli_error($conn);\r\n     }\r\n }\r\n \r\n mysqli_close($conn);\r\n@@ -66,33 +53,34 @@\n         <div class=\"text\">\r\n             <h2>Create Account</h2>\r\n             <p>Fields marked with (*) are required.</p>\r\n         </div>\r\n-        <form action=\"\" method=\"post\">\r\n+        <form action=\"signup.php\" method=\"post\">\r\n             <label for=\"name\">Full Name</label>\r\n-            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" value=\"<?php echo isset($name) ? $name : ''; ?>\" required>\r\n+            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n \r\n             <label for=\"email\">Email</label>\r\n-            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" value=\"<?php echo isset($email) ? $email : ''; ?>\" required>\r\n+            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" required>\r\n \r\n             <label for=\"pass\">Password</label>\r\n             <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n \r\n             <label for=\"phone\">Your Phone</label>\r\n-            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\" value=\"<?php echo isset($phone) ? $phone : ''; ?>\">\r\n+            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n \r\n             <label>Role</label>\r\n             <div class=\"role-options\">\r\n                 <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" <?php echo (isset($role_id) && $role_id == 1) ? 'checked' : ''; ?> required>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n                     <label for=\"student\">Student</label>\r\n                 </div>\r\n                 <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\" <?php echo (isset($role_id) && $role_id == 2) ? 'checked' : ''; ?>>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n                     <label for=\"trainer\">Trainer</label>\r\n                 </div>\r\n             </div>\r\n \r\n+        \r\n             <?php if(!empty($error_msg)): ?>\r\n                 <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n             <?php endif; ?>\r\n \r\n"
                },
                {
                    "date": 1765148741864,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,43 +1,5 @@\n-<?php\r\n-include \"config.php\";\r\n \r\n-if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-\r\n-    $name     = $_POST['name'];\r\n-    $email    = $_POST['email'];\r\n-    $pass     = $_POST['pass'];\r\n-    $phone    = $_POST['phone'];\r\n-    $role_id  = $_POST['role_id'];\r\n-\r\n-   \r\n-    $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n-    $check_result = mysqli_query($conn, $check_sql);\r\n-\r\n-    if (mysqli_num_rows($check_result) > 0) {\r\n-        echo \"Email already exists!\";\r\n-        exit();\r\n-    }\r\n-\r\n-    \r\n-    $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n-\r\n-   \r\n-    $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n-                   VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n-\r\n-    if (mysqli_query($conn, $insert_sql)) {\r\n-      \r\n-        header(\"Location: dashboard.html\");\r\n-        exit();\r\n-    } else {\r\n-        echo \"Error: \" . mysqli_error($conn);\r\n-    }\r\n-}\r\n-\r\n-mysqli_close($conn);\r\n-?>\r\n-\r\n <!DOCTYPE html>\r\n <html lang=\"fr\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n"
                },
                {
                    "date": 1765148763821,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,5 +55,5 @@\n     </div>\r\n     <div class=\"img\"></div>\r\n </div>\r\n </body>\r\n-</html>\n\\ No newline at end of file\n+</html>\r\n"
                },
                {
                    "date": 1765148771641,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n \r\n+\r\n <!DOCTYPE html>\r\n-<html lang=\"fr\">\r\n+<html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n     <title>Formix / Sign-up</title>\r\n"
                },
                {
                    "date": 1765148773232,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,44 @@\n \r\n+<?php\r\n+include \"config.php\";\r\n \r\n+if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n+\r\n+    $name     = $_POST['name'];\r\n+    $email    = $_POST['email'];\r\n+    $pass     = $_POST['pass'];\r\n+    $phone    = $_POST['phone'];\r\n+    $role_id  = $_POST['role_id'];\r\n+\r\n+   \r\n+    $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n+    $check_result = mysqli_query($conn, $check_sql);\r\n+\r\n+    if (mysqli_num_rows($check_result) > 0) {\r\n+        echo \"Email already exists!\";\r\n+        exit();\r\n+    }\r\n+\r\n+    \r\n+    $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n+\r\n+   \r\n+    $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n+                   VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n+\r\n+    if (mysqli_query($conn, $insert_sql)) {\r\n+      \r\n+        header(\"Location: dashboard.html\");\r\n+        exit();\r\n+    } else {\r\n+        echo \"Error: \" . mysqli_error($conn);\r\n+    }\r\n+}\r\n+\r\n+mysqli_close($conn);\r\n+?>\r\n+\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n"
                },
                {
                    "date": 1765148895024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,46 +1,58 @@\n-\r\n <?php\r\n+session_start();\r\n include \"config.php\";\r\n \r\n+$error_msg = \"\";\r\n+\r\n+// معالجة الفورم عند الضغط على Sign-up\r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n \r\n-    $name     = $_POST['name'];\r\n-    $email    = $_POST['email'];\r\n-    $pass     = $_POST['pass'];\r\n-    $phone    = $_POST['phone'];\r\n-    $role_id  = $_POST['role_id'];\r\n+    $name     = trim($_POST['name']);\r\n+    $email    = trim($_POST['email']);\r\n+    $pass     = trim($_POST['pass']);\r\n+    $phone    = trim($_POST['phone']);\r\n+    $role_id  = isset($_POST['role_id']) ? $_POST['role_id'] : null; // ✔ هنا التجنب\r\n \r\n-   \r\n-    $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n-    $check_result = mysqli_query($conn, $check_sql);\r\n+    // التحقق من الحقول المطلوبة\r\n+    if (empty($name) || empty($email) || empty($pass) || $role_id === null) {\r\n+        $error_msg = \"Please fill in all required fields and select a role!\";\r\n+    } else {\r\n+        // التحقق من البريد المكرر\r\n+        $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n+        $check_result = mysqli_query($conn, $check_sql);\r\n \r\n-    if (mysqli_num_rows($check_result) > 0) {\r\n-        echo \"Email already exists!\";\r\n-        exit();\r\n-    }\r\n+        if (mysqli_num_rows($check_result) > 0) {\r\n+            $error_msg = \"Email already exists!\";\r\n+        } else {\r\n+            // تشفير كلمة المرور\r\n+            $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n \r\n-    \r\n-    $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n+            // إدخال البيانات\r\n+            $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n+                           VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n \r\n-   \r\n-    $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n-                   VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n+            if (mysqli_query($conn, $insert_sql)) {\r\n+                // إنشاء جلسة للمستخدم\r\n+                $_SESSION['user_name']  = $name;\r\n+                $_SESSION['user_email'] = $email;\r\n+                $_SESSION['user_role']  = $role_id;\r\n \r\n-    if (mysqli_query($conn, $insert_sql)) {\r\n-      \r\n-        header(\"Location: dashboard.html\");\r\n-        exit();\r\n-    } else {\r\n-        echo \"Error: \" . mysqli_error($conn);\r\n+                // إعادة التوجيه إلى Dashboard\r\n+                header(\"Location: dashboard.php\");\r\n+                exit();\r\n+            } else {\r\n+                $error_msg = \"Database Error: \" . mysqli_error($conn);\r\n+            }\r\n+        }\r\n     }\r\n }\r\n \r\n mysqli_close($conn);\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n-<html lang=\"en\">\r\n+<html lang=\"fr\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n     <title>Formix / Sign-up</title>\r\n@@ -54,45 +66,25 @@\n         <div class=\"text\">\r\n             <h2>Create Account</h2>\r\n             <p>Fields marked with (*) are required.</p>\r\n         </div>\r\n-        <form action=\"signup.php\" method=\"post\">\r\n+        <form action=\"\" method=\"post\">\r\n             <label for=\"name\">Full Name</label>\r\n-            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n+            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" value=\"<?php echo isset($name) ? $name : ''; ?>\" required>\r\n \r\n             <label for=\"email\">Email</label>\r\n-            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" required>\r\n+            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" value=\"<?php echo isset($email) ? $email : ''; ?>\" required>\r\n \r\n             <label for=\"pass\">Password</label>\r\n             <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n \r\n             <label for=\"phone\">Your Phone</label>\r\n-            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n+            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\" value=\"<?php echo isset($phone) ? $phone : ''; ?>\">\r\n \r\n             <label>Role</label>\r\n             <div class=\"role-options\">\r\n                 <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" <?php echo (isset($role_id) && $role_id == 1) ? 'checked' : ''; ?> required>\r\n                     <label for=\"student\">Student</label>\r\n                 </div>\r\n                 <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n-                    <label for=\"trainer\">Trainer</label>\r\n-                </div>\r\n-            </div>\r\n-\r\n-        \r\n-            <?php if(!empty($error_msg)): ?>\r\n-                <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n-            <?php endif; ?>\r\n-\r\n-            <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n-        </form>\r\n-        <div class=\"sing-in\">\r\n-            <p>Already have an account?</p>\r\n-            <a href=\"login.html\">Sign-in</a>\r\n-        </div>\r\n-    </div>\r\n-    <div class=\"img\"></div>\r\n-</div>\r\n-</body>\r\n-</html>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"trainer\"_\r\n"
                },
                {
                    "date": 1765148919927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,58 +1,46 @@\n+\r\n <?php\r\n-session_start();\r\n include \"config.php\";\r\n \r\n-$error_msg = \"\";\r\n-\r\n-// معالجة الفورم عند الضغط على Sign-up\r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n \r\n-    $name     = trim($_POST['name']);\r\n-    $email    = trim($_POST['email']);\r\n-    $pass     = trim($_POST['pass']);\r\n-    $phone    = trim($_POST['phone']);\r\n-    $role_id  = isset($_POST['role_id']) ? $_POST['role_id'] : null; // ✔ هنا التجنب\r\n+    $name     = $_POST['name'];\r\n+    $email    = $_POST['email'];\r\n+    $pass     = $_POST['pass'];\r\n+    $phone    = $_POST['phone'];\r\n+    $role_id  = $_POST['role_id'];\r\n \r\n-    // التحقق من الحقول المطلوبة\r\n-    if (empty($name) || empty($email) || empty($pass) || $role_id === null) {\r\n-        $error_msg = \"Please fill in all required fields and select a role!\";\r\n-    } else {\r\n-        // التحقق من البريد المكرر\r\n-        $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n-        $check_result = mysqli_query($conn, $check_sql);\r\n+   \r\n+    $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n+    $check_result = mysqli_query($conn, $check_sql);\r\n \r\n-        if (mysqli_num_rows($check_result) > 0) {\r\n-            $error_msg = \"Email already exists!\";\r\n-        } else {\r\n-            // تشفير كلمة المرور\r\n-            $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n+    if (mysqli_num_rows($check_result) > 0) {\r\n+        echo \"Email already exists!\";\r\n+        exit();\r\n+    }\r\n \r\n-            // إدخال البيانات\r\n-            $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n-                           VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n+    \r\n+    $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n \r\n-            if (mysqli_query($conn, $insert_sql)) {\r\n-                // إنشاء جلسة للمستخدم\r\n-                $_SESSION['user_name']  = $name;\r\n-                $_SESSION['user_email'] = $email;\r\n-                $_SESSION['user_role']  = $role_id;\r\n+   \r\n+    $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n+                   VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n \r\n-                // إعادة التوجيه إلى Dashboard\r\n-                header(\"Location: dashboard.php\");\r\n-                exit();\r\n-            } else {\r\n-                $error_msg = \"Database Error: \" . mysqli_error($conn);\r\n-            }\r\n-        }\r\n+    if (mysqli_query($conn, $insert_sql)) {\r\n+      \r\n+        header(\"Location: dashboard.html\");\r\n+        exit();\r\n+    } else {\r\n+        echo \"Error: \" . mysqli_error($conn);\r\n     }\r\n }\r\n \r\n mysqli_close($conn);\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n-<html lang=\"fr\">\r\n+<html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n     <title>Formix / Sign-up</title>\r\n@@ -66,25 +54,45 @@\n         <div class=\"text\">\r\n             <h2>Create Account</h2>\r\n             <p>Fields marked with (*) are required.</p>\r\n         </div>\r\n-        <form action=\"\" method=\"post\">\r\n+        <form action=\"signup.php\" method=\"post\">\r\n             <label for=\"name\">Full Name</label>\r\n-            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" value=\"<?php echo isset($name) ? $name : ''; ?>\" required>\r\n+            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n \r\n             <label for=\"email\">Email</label>\r\n-            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" value=\"<?php echo isset($email) ? $email : ''; ?>\" required>\r\n+            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" required>\r\n \r\n             <label for=\"pass\">Password</label>\r\n             <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n \r\n             <label for=\"phone\">Your Phone</label>\r\n-            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\" value=\"<?php echo isset($phone) ? $phone : ''; ?>\">\r\n+            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n \r\n             <label>Role</label>\r\n             <div class=\"role-options\">\r\n                 <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" <?php echo (isset($role_id) && $role_id == 1) ? 'checked' : ''; ?> required>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n                     <label for=\"student\">Student</label>\r\n                 </div>\r\n                 <div>\r\n-                    <input type=\"radio\" name=\"role_id\" id=\"trainer\"_\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n+                    <label for=\"trainer\">Trainer</label>\r\n+                </div>\r\n+            </div>\r\n+\r\n+        \r\n+            <?php if(!empty($error_msg)): ?>\r\n+                <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n+            <?php endif; ?>\r\n+\r\n+            <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n+        </form>\r\n+        <div class=\"sing-in\">\r\n+            <p>Already have an account?</p>\r\n+            <a href=\"login.html\">Sign-in</a>\r\n+        </div>\r\n+    </div>\r\n+    <div class=\"img\"></div>\r\n+</div>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1765148945909,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,9 +67,9 @@\n \r\n             <label for=\"phone\">Your Phone</label>\r\n             <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n \r\n-            <label>Role</label>\r\n+            <!-- <label>Role</label>\r\n             <div class=\"role-options\">\r\n                 <div>\r\n                     <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n                     <label for=\"student\">Student</label>\r\n@@ -77,9 +77,9 @@\n                 <div>\r\n                     <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n                     <label for=\"trainer\">Trainer</label>\r\n                 </div>\r\n-            </div>\r\n+            </div> -->\r\n \r\n         \r\n             <?php if(!empty($error_msg)): ?>\r\n                 <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n"
                },
                {
                    "date": 1765148958834,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n     \r\n     $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n \r\n    \r\n-    // $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n+    // $insert_sql = \"INSERT INTO users (nom, email, password, telephone:)\r\n                    VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n \r\n     if (mysqli_query($conn, $insert_sql)) {\r\n       \r\n"
                },
                {
                    "date": 1765149715423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,107 @@\n+<?php\r\n+include \"config.php\";\r\n+\r\n+// تهيئة متغير رسائل الخطأ\r\n+$error_msg = \"\";\r\n+\r\n+// التحقق من إرسال الفورم\r\n+if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n+\r\n+    // جلب القيم من الفورم\r\n+    $name     = trim($_POST['name']);\r\n+    $email    = trim($_POST['email']);\r\n+    $pass     = trim($_POST['pass']);\r\n+    $phone    = trim($_POST['phone']);\r\n+    $role_id  = isset($_POST['role_id']) ? $_POST['role_id'] : null;\r\n+\r\n+    // التحقق من أن المستخدم اختار الدور\r\n+    if ($role_id === null) {\r\n+        $error_msg = \"Please select a role!\";\r\n+    }\r\n+    // التحقق من البريد وكلمة المرور\r\n+    elseif (empty($name) || empty($email) || empty($pass)) {\r\n+        $error_msg = \"All fields marked with * are required!\";\r\n+    } else {\r\n+        // التحقق من وجود البريد مسبقًا\r\n+        $check_sql = \"SELECT id FROM users WHERE email='$email' LIMIT 1\";\r\n+        $check_result = mysqli_query($conn, $check_sql);\r\n+\r\n+        if (mysqli_num_rows($check_result) > 0) {\r\n+            $error_msg = \"Email already exists!\";\r\n+        } else {\r\n+            // تشفير كلمة المرور\r\n+            $hashed_pass = password_hash($pass, PASSWORD_DEFAULT);\r\n+\r\n+            $insert_sql = \"INSERT INTO users (nom, email, password, telephone, role_id)\r\n+                           VALUES ('$name', '$email', '$hashed_pass', '$phone', '$role_id')\";\r\n+\r\n+            if (mysqli_query($conn, $insert_sql)) {\r\n+        \r\n+                header(\"Location: dashboard.html\");\r\n+                exit();\r\n+            } else {\r\n+                $error_msg = \"Database error: \" . mysqli_error($conn);\r\n+            }\r\n+        }\r\n+    }\r\n+}\r\n+\r\n+mysqli_close($conn);\r\n+?>\r\n+\r\n+<!DOCTYPE html>\r\n+<html lang=\"en\">\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n+    <title>Formix / Sign-up</title>\r\n+    <script src=\"https://kit.fontawesome.com/f14d152ebc.js\" crossorigin=\"anonymous\"></script>\r\n+    <link rel=\"stylesheet\" href=\"../assets/css/pages/sign-up.css\">\r\n+</head>\r\n+<body>\r\n+<div class=\"container\">\r\n+    <div class=\"form\">\r\n+        <div class=\"text\">\r\n+            <h2>Create Account</h2>\r\n+            <p>Fields marked with (*) are required.</p>\r\n+        </div>\r\n+        <form action=\"\" method=\"post\">\r\n+            <label for=\"name\">Full Name</label>\r\n+            <input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Enter Your Name *\" required>\r\n+\r\n+            <label for=\"email\">Email</label>\r\n+            <input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Enter Your Email *\" required>\r\n+\r\n+            <label for=\"pass\">Password</label>\r\n+            <input type=\"password\" name=\"pass\" id=\"pass\" placeholder=\"Enter Your Password *\" required>\r\n+\r\n+            <label for=\"phone\">Your Phone</label>\r\n+            <input type=\"text\" name=\"phone\" placeholder=\"Enter Your Phone\">\r\n+\r\n+            <label>Role *</label>\r\n+            <div class=\"role-options\">\r\n+                <div>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"student\" value=\"1\" required>\r\n+                    <label for=\"student\">Student</label>\r\n+                </div>\r\n+                <div>\r\n+                    <input type=\"radio\" name=\"role_id\" id=\"trainer\" value=\"2\">\r\n+                    <label for=\"trainer\">Trainer</label>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <?php if(!empty($error_msg)): ?>\r\n+                <p style=\"color:red; font-weight:500; margin-bottom:10px;\"><?php echo $error_msg; ?></p>\r\n+            <?php endif; ?>\r\n+\r\n+            <input type=\"submit\" name=\"create\" id=\"send\" value=\"Sign-up\">\r\n+        </form>\r\n+        <div class=\"sing-in\">\r\n+            <p>Already have an account?</p>\r\n+            <a href=\"login.html\">Sign-in</a>\r\n+        </div>\r\n+    </div>\r\n+    <div class=\"img\"></div>\r\n+</div>\r\n+</body>\r\n+</html>\r\n"
                }
            ],
            "date": 1765025237117,
            "name": "Commit-0",
            "content": "<?php\n "
        }
    ]
}