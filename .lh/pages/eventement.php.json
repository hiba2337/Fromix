{
    "sourceFile": "pages/eventement.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 18,
            "patches": [
                {
                    "date": 1765625030302,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1765625083773,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,8 +80,19 @@\n <title>Formix | Events</title>\n <link rel=\"stylesheet\" href=\"../assets/css/pages/evets.css\">\n <script src=\"https://kit.fontawesome.com/f14d152ebc.js\" crossorigin=\"anonymous\"></script>\n </head>\n+<?php if (!empty($success_message)): ?>\n+<script>\n+    const toast = document.getElementById(\"toast\");\n+    toast.classList.remove(\"hidden\");\n+\n+    setTimeout(() => {\n+        toast.classList.add(\"hidden\");\n+    }, 3000); // ÿ™ÿÆÿ™ŸÅŸä ÿ®ÿπÿØ 3 ÿ´ŸàÿßŸÜŸç\n+</script>\n+<?php endif; ?>\n+\n <body>\n     <div id=\"toast\" class=\"toast hidden\">\n     Registration completed successfully!\n </div>\n"
                },
                {
                    "date": 1765625190693,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,9 @@\n     toast.classList.remove(\"hidden\");\n \n     setTimeout(() => {\n         toast.classList.add(\"hidden\");\n-    }, 3000); // ÿ™ÿÆÿ™ŸÅŸä ÿ®ÿπÿØ 3 ÿ´ŸàÿßŸÜŸç\n+    }, 3000); \n </script>\n <?php endif; ?>\n \n <body>\n"
                },
                {
                    "date": 1765625207936,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,17 +81,9 @@\n <link rel=\"stylesheet\" href=\"../assets/css/pages/evets.css\">\n <script src=\"https://kit.fontawesome.com/f14d152ebc.js\" crossorigin=\"anonymous\"></script>\n </head>\n <?php if (!empty($success_message)): ?>\n-<script>\n-    const toast = document.getElementById(\"toast\");\n-    toast.classList.remove(\"hidden\");\n \n-    setTimeout(() => {\n-        toast.classList.add(\"hidden\");\n-    }, 3000); \n-</script>\n-<?php endif; ?>\n \n <body>\n     <div id=\"toast\" class=\"toast hidden\">\n     Registration completed successfully!\n"
                },
                {
                    "date": 1765625247159,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,15 +80,10 @@\n <title>Formix | Events</title>\n <link rel=\"stylesheet\" href=\"../assets/css/pages/evets.css\">\n <script src=\"https://kit.fontawesome.com/f14d152ebc.js\" crossorigin=\"anonymous\"></script>\n </head>\n-<?php if (!empty($success_message)): ?>\n-\n-\n <body>\n-    <div id=\"toast\" class=\"toast hidden\">\n-    Registration completed successfully!\n-</div>\n+    \n <div class=\"events\">\n     <aside class=\"side-bar\">\n         <img src=\"../assets/images/logo/sidebar.png\" alt=\"\" class=\"logo\">\n         <ul>\n"
                },
                {
                    "date": 1765625483541,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,9 +157,9 @@\n         <?php endif; ?>\n     <?php endif; ?>\n \n     <?php if($error_message): ?>\n-        <p style=\"color:red;\"><?= $error_message ?></p>\n+        <!-- <p style=\"color:red;\"><?= $error_message ?></p> -->\n     <?php endif; ?>\n </div>\n \n         <form id=\"registerForm\" method=\"post\" action=\"eventement.php\">\n"
                },
                {
                    "date": 1765625501712,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,9 +157,9 @@\n         <?php endif; ?>\n     <?php endif; ?>\n \n     <?php if($error_message): ?>\n-        <!-- <p style=\"color:red;\"><?= $error_message ?></p> -->\n+        <p style=\"color:red;\"><?= $error_message ?></p>\n     <?php endif; ?>\n </div>\n \n         <form id=\"registerForm\" method=\"post\" action=\"eventement.php\">\n"
                },
                {
                    "date": 1765626531685,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,26 +161,39 @@\n         <p style=\"color:red;\"><?= $error_message ?></p>\n     <?php endif; ?>\n </div>\n \n+       <?php if (empty($success_message)): ?>\n         <form id=\"registerForm\" method=\"post\" action=\"eventement.php\">\n+\n             <input type=\"hidden\" name=\"evenement_id\" id=\"evenement_id\">\n-            <label for=\"fullname\">Full Name</label>\n-            <input type=\"text\" id=\"fullname\" name=\"fullname\" placeholder=\"Enter your full name\" required>\n-            <label for=\"email\">Email</label>\n-            <input type=\"email\" id=\"email\" name=\"email\" placeholder=\"Enter your email\" required>\n-            <label for=\"phone\">Phone (Optional)</label>\n-            <input type=\"tel\" id=\"phone\" name=\"phone\" placeholder=\"Enter your phone number\">\n-            <label for=\"session\">Choose Session</label>\n-            <select id=\"session\" name=\"session\">\n+\n+            <label>Full Name</label>\n+            <input type=\"text\" name=\"fullname\" required>\n+\n+            <label>Email</label>\n+            <input type=\"email\" name=\"email\" required>\n+\n+            <label>Phone (Optional)</label>\n+            <input type=\"tel\" name=\"phone\">\n+\n+            <label>Choose Session</label>\n+            <select name=\"session\">\n                 <option value=\"morning\">Morning</option>\n                 <option value=\"afternoon\">Afternoon</option>\n                 <option value=\"evening\">Evening</option>\n             </select>\n-            <label for=\"notes\">Notes (Optional)</label>\n-            <textarea id=\"notes\" name=\"notes\" placeholder=\"Any special requests\"></textarea>\n-            <button type=\"submit\" name=\"register_submit\" class=\"submit-btn\">Submit</button>\n+\n+            <label>Notes (Optional)</label>\n+            <textarea name=\"notes\"></textarea>\n+\n+            <button type=\"submit\" name=\"register_submit\">\n+                Submit\n+            </button>\n+\n         </form>\n+        <?php endif; ?>\n+\n     </div>\n </div>\n \n <script>\n"
                },
                {
                    "date": 1765626636742,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -202,8 +202,11 @@\n     const modal = document.getElementById('modal');\n     const modalTitle = document.querySelector('.modal-title');\n     const evenementInput = document.getElementById('evenement_id');\n     const closeBtn = document.getElementById('close');\n+<?php if (!empty($success_message) || !empty($error_message)): ?>\n+    modal.classList.remove('hidden');\n+<?php endif; ?>\n \n     buttons.forEach(btn => {\n         btn.addEventListener('click', function(e) {\n             e.preventDefault();\n"
                },
                {
                    "date": 1765626649210,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -202,11 +202,8 @@\n     const modal = document.getElementById('modal');\n     const modalTitle = document.querySelector('.modal-title');\n     const evenementInput = document.getElementById('evenement_id');\n     const closeBtn = document.getElementById('close');\n-<?php if (!empty($success_message) || !empty($error_message)): ?>\n-    modal.classList.remove('hidden');\n-<?php endif; ?>\n \n     buttons.forEach(btn => {\n         btn.addEventListener('click', function(e) {\n             e.preventDefault();\n@@ -215,12 +212,18 @@\n             evenementInput.value = this.getAttribute('data-event-id');\n         });\n     });\n \n+    // ‚úÖ Ÿáÿ∞ÿß ŸáŸà ÿßŸÑÿ≥ÿ∑ÿ± ÿßŸÑŸÖŸáŸÖ\n+    <?php if (!empty($success_message) || !empty($error_message)): ?>\n+        modal.classList.remove('hidden');\n+    <?php endif; ?>\n+\n     closeBtn.addEventListener('click', () => modal.classList.add('hidden'));\n     window.addEventListener('click', function(e) {\n         if (e.target === modal) modal.classList.add('hidden');\n     });\n });\n </script>\n+\n </body>\n </html>\n"
                },
                {
                    "date": 1765626738800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -212,10 +212,10 @@\n             evenementInput.value = this.getAttribute('data-event-id');\n         });\n     });\n \n-    // ‚úÖ Ÿáÿ∞ÿß ŸáŸà ÿßŸÑÿ≥ÿ∑ÿ± ÿßŸÑŸÖŸáŸÖ\n-    <?php if (!empty($success_message) || !empty($error_message)): ?>\n+    // ‚úÖ ŸäŸÅÿ™ÿ≠ ÿßŸÑŸÄ modal ŸÅŸÇÿ∑ ÿ®ÿπÿØ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÅŸàÿ±ŸÖ\n+    <?php if (isset($_POST['register_submit'])): ?>\n         modal.classList.remove('hidden');\n     <?php endif; ?>\n \n     closeBtn.addEventListener('click', () => modal.classList.add('hidden'));\n@@ -224,6 +224,7 @@\n     });\n });\n </script>\n \n+\n </body>\n </html>\n"
                },
                {
                    "date": 1765626773462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -212,9 +212,9 @@\n             evenementInput.value = this.getAttribute('data-event-id');\n         });\n     });\n \n-    // ‚úÖ ŸäŸÅÿ™ÿ≠ ÿßŸÑŸÄ modal ŸÅŸÇÿ∑ ÿ®ÿπÿØ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÅŸàÿ±ŸÖ\n+   \n     <?php if (isset($_POST['register_submit'])): ?>\n         modal.classList.remove('hidden');\n     <?php endif; ?>\n \n"
                },
                {
                    "date": 1765626868240,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -202,8 +202,11 @@\n     const modal = document.getElementById('modal');\n     const modalTitle = document.querySelector('.modal-title');\n     const evenementInput = document.getElementById('evenement_id');\n     const closeBtn = document.getElementById('close');\n+<?php if (!empty($success_message) || !empty($error_message)): ?>\n+    modal.classList.remove('hidden');\n+<?php endif; ?>\n \n     buttons.forEach(btn => {\n         btn.addEventListener('click', function(e) {\n             e.preventDefault();\n@@ -212,19 +215,12 @@\n             evenementInput.value = this.getAttribute('data-event-id');\n         });\n     });\n \n-   \n-    <?php if (isset($_POST['register_submit'])): ?>\n-        modal.classList.remove('hidden');\n-    <?php endif; ?>\n-\n     closeBtn.addEventListener('click', () => modal.classList.add('hidden'));\n     window.addEventListener('click', function(e) {\n         if (e.target === modal) modal.classList.add('hidden');\n     });\n });\n </script>\n-\n-\n </body>\n </html>\n"
                },
                {
                    "date": 1765626894082,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -202,11 +202,8 @@\n     const modal = document.getElementById('modal');\n     const modalTitle = document.querySelector('.modal-title');\n     const evenementInput = document.getElementById('evenement_id');\n     const closeBtn = document.getElementById('close');\n-<?php if (!empty($success_message) || !empty($error_message)): ?>\n-    modal.classList.remove('hidden');\n-<?php endif; ?>\n \n     buttons.forEach(btn => {\n         btn.addEventListener('click', function(e) {\n             e.preventDefault();\n"
                },
                {
                    "date": 1765627051435,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -156,44 +156,31 @@\n             <img src=\"<?= $qr_file ?>\" alt=\"QR Code\">\n         <?php endif; ?>\n     <?php endif; ?>\n \n-    <?php if($error_message): ?>\n-        <p style=\"color:red;\"><?= $error_message ?></p>\n-    <?php endif; ?>\n </div>\n \n-       <?php if (empty($success_message)): ?>\n-        <form id=\"registerForm\" method=\"post\" action=\"eventement.php\">\n-\n+<form id=\"registerForm\" method=\"post\" action=\"eventement.php\">\n+            <?php if($error_message): ?>\n+                <p style=\"color:red;\"><?= $error_message ?></p>\n+            <?php endif; ?>\n             <input type=\"hidden\" name=\"evenement_id\" id=\"evenement_id\">\n-\n-            <label>Full Name</label>\n-            <input type=\"text\" name=\"fullname\" required>\n-\n-            <label>Email</label>\n-            <input type=\"email\" name=\"email\" required>\n-\n-            <label>Phone (Optional)</label>\n-            <input type=\"tel\" name=\"phone\">\n-\n-            <label>Choose Session</label>\n-            <select name=\"session\">\n+            <label for=\"fullname\">Full Name</label>\n+            <input type=\"text\" id=\"fullname\" name=\"fullname\" placeholder=\"Enter your full name\" required>\n+            <label for=\"email\">Email</label>\n+            <input type=\"email\" id=\"email\" name=\"email\" placeholder=\"Enter your email\" required>\n+            <label for=\"phone\">Phone (Optional)</label>\n+            <input type=\"tel\" id=\"phone\" name=\"phone\" placeholder=\"Enter your phone number\">\n+            <label for=\"session\">Choose Session</label>\n+            <select id=\"session\" name=\"session\">\n                 <option value=\"morning\">Morning</option>\n                 <option value=\"afternoon\">Afternoon</option>\n                 <option value=\"evening\">Evening</option>\n             </select>\n-\n-            <label>Notes (Optional)</label>\n-            <textarea name=\"notes\"></textarea>\n-\n-            <button type=\"submit\" name=\"register_submit\">\n-                Submit\n-            </button>\n-\n+            <label for=\"notes\">Notes (Optional)</label>\n+            <textarea id=\"notes\" name=\"notes\" placeholder=\"Any special requests\"></textarea>\n+            <button type=\"submit\" name=\"register_submit\" class=\"submit-btn\">Submit</button>\n         </form>\n-        <?php endif; ?>\n-\n     </div>\n </div>\n \n <script>\n"
                },
                {
                    "date": 1765627060639,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -158,12 +158,12 @@\n     <?php endif; ?>\n \n </div>\n \n+<?php if($error_message): ?>\n+    <p style=\"color:red;\"><?= $error_message ?></p>\n+<?php endif; ?>\n <form id=\"registerForm\" method=\"post\" action=\"eventement.php\">\n-            <?php if($error_message): ?>\n-                <p style=\"color:red;\"><?= $error_message ?></p>\n-            <?php endif; ?>\n             <input type=\"hidden\" name=\"evenement_id\" id=\"evenement_id\">\n             <label for=\"fullname\">Full Name</label>\n             <input type=\"text\" id=\"fullname\" name=\"fullname\" placeholder=\"Enter your full name\" required>\n             <label for=\"email\">Email</label>\n"
                },
                {
                    "date": 1765627203771,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -138,10 +138,10 @@\n                 <?php endif; ?>\n             <?php endif; ?>\n         </div>\n \n-        <?php if (!empty($success_message)) echo \"<p style='color:green;'>$success_message</p>\"; ?>\n-        <?php if (!empty($error_message)) echo \"<p style='color:red;'>$error_message</p>\"; ?>\n+        <!-- <?php if (!empty($success_message)) echo \"<p style='color:green;'>$success_message</p>\"; ?>\n+        <?php if (!empty($error_message)) echo \"<p style='color:red;'>$error_message</p>\"; ?> -->\n     </main>\n </div>\n \n <div id=\"modal\" class=\"modal hidden\">\n@@ -156,13 +156,13 @@\n             <img src=\"<?= $qr_file ?>\" alt=\"QR Code\">\n         <?php endif; ?>\n     <?php endif; ?>\n \n+    <?php if($error_message): ?>\n+        <p style=\"color:red;\"><?= $error_message ?></p>\n+    <?php endif; ?>\n </div>\n \n-<?php if($error_message): ?>\n-    <p style=\"color:red;\"><?= $error_message ?></p>\n-<?php endif; ?>\n <form id=\"registerForm\" method=\"post\" action=\"eventement.php\">\n             <input type=\"hidden\" name=\"evenement_id\" id=\"evenement_id\">\n             <label for=\"fullname\">Full Name</label>\n             <input type=\"text\" id=\"fullname\" name=\"fullname\" placeholder=\"Enter your full name\" required>\n"
                },
                {
                    "date": 1765627213112,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,9 +139,9 @@\n             <?php endif; ?>\n         </div>\n \n          <?php if (!empty($success_message)) echo \"<p style='color:green;'>$success_message</p>\"; ?>\n-        <?php if (!empty($error_message)) echo \"<p style='color:red;'>$error_message</p>\"; ?> -->\n+        <?php if (!empty($error_message)) echo \"<p style='color:red;'>$error_message</p>\"; ?> -\n     </main>\n </div>\n \n <div id=\"modal\" class=\"modal hidden\">\n"
                },
                {
                    "date": 1765627425041,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n         <img src=\"../assets/images/logo/sidebar.png\" alt=\"\" class=\"logo\">\n         <ul>\n             <li><a href=\"dashboard.html\"><i class=\"fa-regular fa-chart-bar fa-fw\"></i><span>Dashboard</span></a></li>\n             <li><a href=\"formation.html\"><i class=\"fa-solid fa-graduation-cap fa-fw\"></i><span>Courses</span></a></li>\n-            <li><a href=\"e\"><i class=\"fa-solid fa-calendar-days\"></i><span>Events</span></a></li>\n+            <li><a href=\"ev\"><i class=\"fa-solid fa-calendar-days\"></i><span>Events</span></a></li>\n             <li><a href=\"panier.html\"><i class=\"fa-solid fa-cart-shopping\"></i><span>Cart</span></a></li>\n             <li><a href=\"Blog.html\"><i class=\"fa-solid fa-pen-nib\"></i><span>Blog</span></a></li>\n             <li><a href=\"contact.html\"><i class=\"fa-solid fa-phone\"></i><span>Contact</span></a></li>\n             <li><a href=\"../index.html\"><i class=\"fa-solid fa-right-from-bracket\"></i><span>Log Out</span></a></li>\n"
                }
            ],
            "date": 1765625030302,
            "name": "Commit-0",
            "content": "<?php\ninclude \"config.php\";\nsession_start();\nrequire_once \"../assets/phpqrcode/qrlib.php\";\n\n$success_message = \"\";\n$error_message = \"\";\n$qr_file = \"\";\n\nif (isset($_POST[\"register_submit\"])) {\n\n    $evenement_id = $_POST[\"evenement_id\"];\n    $fullname = $_POST[\"fullname\"];\n    $email = $_POST[\"email\"];\n    $phone = $_POST[\"phone\"] ?? '';\n    $horaire = $_POST[\"session\"];\n    $note = $_POST[\"notes\"] ?? '';\n\n  \n    $sql_user = \"SELECT * FROM users WHERE email='$email'\";\n    $result_user = mysqli_query($conn, $sql_user);\n\n    if (mysqli_num_rows($result_user) > 0) {\n        $user = mysqli_fetch_assoc($result_user);\n        $user_id = $user['id'];\n\n      \n        $check = \"SELECT * FROM inscriptions_evenements \n                  WHERE user_id='$user_id' AND evenement_id='$evenement_id'\";\n        $res_check = mysqli_query($conn, $check);\n\n        if (mysqli_num_rows($res_check) > 0) {\n            $error_message = \"You are already registered for this event!\";\n        } else {\n           \n            $qr_content = \"Event: $evenement_id, Name: $fullname, Email: $email, Session: $horaire\";\n            $qr_file = \"assets/qrcodes/qr_\" . time() . \".png\";\n            QRcode::png($qr_content, \"../\" . $qr_file, QR_ECLEVEL_L, 4);\n\n            $stmt = \"INSERT INTO inscriptions_evenements (user_id, evenement_id, horaire, note, qr_code) \n                     VALUES ('$user_id', '$evenement_id', '$horaire', '$note', '$qr_file')\";\n\n            $result = mysqli_query($conn, $stmt);\n\n            if ($result) {\n                $success_message = \"Registration successful! üéâ\";\n            } else {\n                $error_message = \"Error: \" . mysqli_error($conn);\n            }\n        }\n\n    } else {\n        $error_message = \"User not found!\";\n    }\n}\n// search bar PHP\n\n$search = $_GET['search'] ?? \"\";\n\nif (!isset($_GET[\"search\"])  || empty($search)  )  {\n    $sql = \"SELECT * FROM evenements ORDER BY date_event ASC\";\n} else {\n    $clean = mysqli_real_escape_string($conn, $search);\n    $sql = \"SELECT * FROM evenements \n            WHERE titre LIKE '%$clean%' \n               OR description LIKE '%$clean%' \n               OR  lieu = '$clean'\n            ORDER BY date_event ASC\";\n    \n}\n\n$result = mysqli_query($conn, $sql);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>Formix | Events</title>\n<link rel=\"stylesheet\" href=\"../assets/css/pages/evets.css\">\n<script src=\"https://kit.fontawesome.com/f14d152ebc.js\" crossorigin=\"anonymous\"></script>\n</head>\n<body>\n    <div id=\"toast\" class=\"toast hidden\">\n    Registration completed successfully!\n</div>\n<div class=\"events\">\n    <aside class=\"side-bar\">\n        <img src=\"../assets/images/logo/sidebar.png\" alt=\"\" class=\"logo\">\n        <ul>\n            <li><a href=\"dashboard.html\"><i class=\"fa-regular fa-chart-bar fa-fw\"></i><span>Dashboard</span></a></li>\n            <li><a href=\"formation.html\"><i class=\"fa-solid fa-graduation-cap fa-fw\"></i><span>Courses</span></a></li>\n            <li><a href=\"evenement.php\"><i class=\"fa-solid fa-calendar-days\"></i><span>Events</span></a></li>\n            <li><a href=\"panier.html\"><i class=\"fa-solid fa-cart-shopping\"></i><span>Cart</span></a></li>\n            <li><a href=\"Blog.html\"><i class=\"fa-solid fa-pen-nib\"></i><span>Blog</span></a></li>\n            <li><a href=\"contact.html\"><i class=\"fa-solid fa-phone\"></i><span>Contact</span></a></li>\n            <li><a href=\"../index.html\"><i class=\"fa-solid fa-right-from-bracket\"></i><span>Log Out</span></a></li>\n        </ul>\n    </aside>\n\n    <main class=\"event-content\">\n        <header>\n            <div class=\"main-title\"><h2>Events</h2></div>\n\n            <!-- Search Box -->\n            <form class=\"search-box\" method=\"get\" action=\"eventement.php\">\n                <input type=\"text\" name=\"search\" placeholder=\"Search Events...\" value=\"<?php echo isset($_GET['search']) ? $_GET['search'] : ''; ?>\">\n                <button type=\"submit\"><i class=\"fa-solid fa-magnifying-glass\"></i></button>\n            </form>\n        </header>\n\n     \n        <div class=\"content\">\n            <?php if(mysqli_num_rows($result) > 0): ?>\n                <?php while($row = mysqli_fetch_assoc($result)):\n                    $formatted_date = date(\"d M\", strtotime($row['date_event']));\n                ?>\n                    <div class=\"card-event\">\n                        <div class=\"image\">\n                            <img src=\"../assets/images/events/<?php echo $row['image']; ?>\" alt=\"<?php echo $row['titre']; ?>\">\n                            <span class=\"date\"><?php echo $formatted_date; ?></span>\n                        </div>\n                        <div class=\"info\">\n                            <h3><?php echo $row['titre']; ?></h3>\n                            <div class=\"time\">\n                                <span><i class=\"fa-regular fa-clock\"></i> <?php echo $row['heure_debut']; ?> - <?php echo $row['heure_fin']; ?></span>\n                                <span><i class=\"fa-solid fa-location-dot\"></i> <?php echo $row['lieu']; ?></span>\n                            </div>\n                            <p><?php echo $row['description']; ?></p>\n                            <a href=\"#\" class=\"btn-register\" data-event-id=\"<?php echo $row['id']; ?>\" data-event-title=\"<?php echo $row['titre']; ?>\">Register Now</a>\n                        </div>\n                    </div>\n                <?php endwhile; ?>\n            <?php else: ?>\n                <?php if(!empty($search)): ?>\n                    <p>No results found for \"<?php echo htmlspecialchars($search); ?>\"</p>\n                <?php else: ?>\n                    <p>No events available.</p>\n                <?php endif; ?>\n            <?php endif; ?>\n        </div>\n\n        <?php if (!empty($success_message)) echo \"<p style='color:green;'>$success_message</p>\"; ?>\n        <?php if (!empty($error_message)) echo \"<p style='color:red;'>$error_message</p>\"; ?>\n    </main>\n</div>\n\n<div id=\"modal\" class=\"modal hidden\">\n    <div class=\"modal-content\">\n        <span id=\"close\">&times;</span>\n        <h2>Register for <span class=\"modal-title\"></span></h2>\n        <div class=\"message\">\n    <?php if($success_message): ?>\n        <p style=\"color:green;\"><?= $success_message ?></p>\n        <?php if($qr_file && file_exists(\"../\" . $qr_file)): ?>\n            <p>Your QR Code:</p>\n            <img src=\"<?= $qr_file ?>\" alt=\"QR Code\">\n        <?php endif; ?>\n    <?php endif; ?>\n\n    <?php if($error_message): ?>\n        <p style=\"color:red;\"><?= $error_message ?></p>\n    <?php endif; ?>\n</div>\n\n        <form id=\"registerForm\" method=\"post\" action=\"eventement.php\">\n            <input type=\"hidden\" name=\"evenement_id\" id=\"evenement_id\">\n            <label for=\"fullname\">Full Name</label>\n            <input type=\"text\" id=\"fullname\" name=\"fullname\" placeholder=\"Enter your full name\" required>\n            <label for=\"email\">Email</label>\n            <input type=\"email\" id=\"email\" name=\"email\" placeholder=\"Enter your email\" required>\n            <label for=\"phone\">Phone (Optional)</label>\n            <input type=\"tel\" id=\"phone\" name=\"phone\" placeholder=\"Enter your phone number\">\n            <label for=\"session\">Choose Session</label>\n            <select id=\"session\" name=\"session\">\n                <option value=\"morning\">Morning</option>\n                <option value=\"afternoon\">Afternoon</option>\n                <option value=\"evening\">Evening</option>\n            </select>\n            <label for=\"notes\">Notes (Optional)</label>\n            <textarea id=\"notes\" name=\"notes\" placeholder=\"Any special requests\"></textarea>\n            <button type=\"submit\" name=\"register_submit\" class=\"submit-btn\">Submit</button>\n        </form>\n    </div>\n</div>\n\n<script>\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    const buttons = document.querySelectorAll('.btn-register');\n    const modal = document.getElementById('modal');\n    const modalTitle = document.querySelector('.modal-title');\n    const evenementInput = document.getElementById('evenement_id');\n    const closeBtn = document.getElementById('close');\n\n    buttons.forEach(btn => {\n        btn.addEventListener('click', function(e) {\n            e.preventDefault();\n            modal.classList.remove('hidden');\n            modalTitle.textContent = this.getAttribute('data-event-title');\n            evenementInput.value = this.getAttribute('data-event-id');\n        });\n    });\n\n    closeBtn.addEventListener('click', () => modal.classList.add('hidden'));\n    window.addEventListener('click', function(e) {\n        if (e.target === modal) modal.classList.add('hidden');\n    });\n});\n</script>\n</body>\n</html>\n"
        }
    ]
}